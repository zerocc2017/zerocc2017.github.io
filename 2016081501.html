<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content=""><title>服务端 API 接口设计 | zerocc2014</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.2.0"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">服务端 API 接口设计</h1><a id="logo" href="/.">zerocc2014</a><p class="description">桃李春风一杯酒，江湖夜雨十年灯</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/reads/"><i class="fa fa-folder"> 阅读</i></a><a href="/codes/"><i class="fa fa-star"> 干货</i></a><a href="/tags/"><i class="fa fa-tags"> 标签</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">服务端 API 接口设计</h1><div class="post-meta">2016年08月15日<span> | </span><span class="category"><a href="/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF/">服务端</a></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%84"><span class="toc-number">1.</span> <span class="toc-text">请求数据返回结构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#data-%E5%AD%97%E6%AE%B5-%E4%B8%9A%E5%8A%A1%E9%9C%80%E6%B1%82%E6%95%B0%E6%8D%AE"><span class="toc-number">1.1.</span> <span class="toc-text">data 字段 - 业务需求数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#msg-%E5%AD%97%E6%AE%B5-%E8%AF%B7%E6%B1%82%E7%8A%B6%E6%80%81%E6%8F%8F%E8%BF%B0%E8%B0%83%E8%AF%95%E6%95%B0%E6%8D%AE"><span class="toc-number">1.2.</span> <span class="toc-text">msg 字段 - 请求状态描述调试数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#code-%E5%AD%97%E6%AE%B5-%E8%87%AA%E5%AE%9A%E4%B9%89%E4%B8%9A%E5%8A%A1%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-number">1.3.</span> <span class="toc-text">code 字段 - 自定义业务状态码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#extra%E5%AD%97%E6%AE%B5-%E5%85%A8%E5%B1%80%E9%99%84%E5%8A%A0%E6%95%B0%E6%8D%AE"><span class="toc-number">1.4.</span> <span class="toc-text">extra字段 - 全局附加数据</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE%E8%BF%94%E5%9B%9E%E5%80%BC%E7%9A%84%E8%A7%84%E8%8C%83"><span class="toc-number">2.</span> <span class="toc-text">请求数据返回值的规范</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E7%BB%9F%E4%B8%80%E8%A7%84%E8%8C%83"><span class="toc-number">2.1.</span> <span class="toc-text">命名统一规范</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A9%BA%E5%80%BC%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">2.2.</span> <span class="toc-text">空值的处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%9F%E4%B8%80%E7%A9%BA%E5%80%BC%E7%94%A8-null"><span class="toc-number">2.2.1.</span> <span class="toc-text">统一空值用 null</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%9F%E4%B8%80%E7%A9%BA%E5%80%BC%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B%E8%AE%BE%E7%BD%AE%E9%BB%98%E8%AE%A4%E7%A9%BA%E5%80%BC"><span class="toc-number">2.2.2.</span> <span class="toc-text">统一空值不同类型设置默认空值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B0%94-boolean-%E5%80%BC%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">2.2.3.</span> <span class="toc-text">布尔 boolean 值的处理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E5%80%BC%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">2.3.</span> <span class="toc-text">时间日期值的处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#type-%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-number">2.4.</span> <span class="toc-text">type 类型的处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E7%9A%84URL%EF%BC%8C%E5%8D%8F%E8%AE%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">2.5.</span> <span class="toc-text">完整的URL，协议类型</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E5%9C%B0%E5%9D%80"><span class="toc-number">3.</span> <span class="toc-text">参考地址</span></a></li></ol></div></div><div class="post-content"><p>RESTful API 的设计不做过多介绍，只针对 JSON 型 API 返回结果结构的设计的个人理解；</p>
<a id="more"></a>

<h1 id="请求数据返回结构"><a href="#请求数据返回结构" class="headerlink" title="请求数据返回结构"></a>请求数据返回结构</h1><p>服务器返回结果的结构示例：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attribute">data </span>: &#123; <span class="comment">// 请求数据，对象或数组均可</span></span><br><span class="line">        <span class="attribute">user_id</span>: <span class="number">123</span>,</span><br><span class="line">        <span class="attribute">user_name</span>: <span class="string">&quot;zerocc&quot;</span>,</span><br><span class="line">        <span class="attribute">user_avatar_url</span>: <span class="string">&quot;http://zerocc.me/avatar.jpg&quot;</span></span><br><span class="line">        ...</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attribute">msg </span>: <span class="string">&quot;个人信息&quot;</span>, <span class="comment">// 请求状态描述，调试用</span></span><br><span class="line">    <span class="attribute">code</span>: <span class="number">1001</span>, <span class="comment">// 业务自定义状态码</span></span><br><span class="line">    <span class="attribute">extra </span>: &#123; <span class="comment">// 全局附加数据，字段、内容不定</span></span><br><span class="line">        <span class="attribute">type</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attribute">desc</span>: <span class="string">&quot;签到成功！&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="data-字段-业务需求数据"><a href="#data-字段-业务需求数据" class="headerlink" title="data 字段 - 业务需求数据"></a>data 字段 - 业务需求数据</h2><p>请求结果返回的数据 <code>data</code> 字段，为页面显示的具体所有数据，其值类型可以为对象(字典)或数组，据具体业务场景而定，可以灵活组合使用。</p>
<p>如果请求的是用户的个人信息，就可以为字典对象，结构如下：</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">data </span>: &#123; <span class="comment">// 请求返回数据，字典对象</span></span><br><span class="line">    <span class="attribute">user_id</span>: <span class="number">123</span>,</span><br><span class="line">    <span class="attribute">user_name</span>: <span class="string">&quot;zerocc&quot;</span>,</span><br><span class="line">    <span class="attribute">user_avatar_url</span>: <span class="string">&quot;http://zerocc.me/avatar.jpg&quot;</span></span><br><span class="line">    ...</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>如果请求的是列表数据，就可以是数组对象（字典型数组对象），如请求新闻列表：</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data: <span class="type"></span>[</span><br><span class="line">    &#123;nickname: <span class="type">zerocc</span>,</span><br><span class="line">     <span class="keyword">new</span><span class="type">s_id</span>: <span class="number">1</span>, </span><br><span class="line">     <span class="keyword">new</span><span class="type">s_content</span>: <span class="string">&quot;哈哈哈嘎嘎&quot;</span>&#125;,</span><br><span class="line">    &#123;nickname: <span class="type">zerocc1</span>,</span><br><span class="line">     <span class="keyword">new</span><span class="type">s_id</span>: <span class="number">2</span>, </span><br><span class="line">     <span class="keyword">new</span><span class="type">s_content</span>: <span class="string">&quot;哈哈哈嘎嘎&quot;</span>&#125;,</span><br><span class="line">    ...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="msg-字段-请求状态描述调试数据"><a href="#msg-字段-请求状态描述调试数据" class="headerlink" title="msg 字段 - 请求状态描述调试数据"></a>msg 字段 - 请求状态描述调试数据</h2><p><code>msg</code> 字段是本次请求的业务、状态描述信息，用于调试，线上问题定位 debug 以及配合埋点等作用；</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">msg:</span> <span class="string">&quot;个人信息接口&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">msg:</span> <span class="string">&quot;请求缺少参数&quot;</span></span><br></pre></td></tr></table></figure>


<h2 id="code-字段-自定义业务状态码"><a href="#code-字段-自定义业务状态码" class="headerlink" title="code 字段 - 自定义业务状态码"></a>code 字段 - 自定义业务状态码</h2><p>HTTP 请求本身已经有了完备的状态码, 为什么还要自定义一套状态码呢？如一次成功的 Http status 200 的请求，可能由于用户未登录、登录过期而有不同的返回结果和处理方式，并且根据业务分类自定义状态码更容易去定位问题等等；</p>
<p>状态码的定义服务端应该有一套规范，可以按照用户相关、授权相关、各种业务等等做分类：</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Code 业务自定义状态码定义示例</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 授权相关</span></span><br><span class="line"><span class="number">1001</span>: 无权限访问</span><br><span class="line"><span class="number">1002</span>: access_token过期</span><br><span class="line"><span class="number">1003</span>: unique_token无效</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用户相关</span></span><br><span class="line"><span class="number">2001</span>: 未登录</span><br><span class="line"><span class="number">2002</span>: 用户信息错误</span><br><span class="line"><span class="number">2003</span>: 用户不存在</span><br><span class="line"></span><br><span class="line"><span class="comment">// 业务1</span></span><br><span class="line"><span class="number">3001</span>: 业务<span class="number">1</span>XXX</span><br><span class="line"><span class="number">3002</span>: 业务<span class="number">1</span>XXX</span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes">HTTP 的状态码参考链接</a></p>
<h2 id="extra字段-全局附加数据"><a href="#extra字段-全局附加数据" class="headerlink" title="extra字段 - 全局附加数据"></a>extra字段 - 全局附加数据</h2><p>extra字段，用来表示全局的附加数据。业务场景用户的操作（数据请求），会导致用户的等级、经验变化，而具体什么时候产生不确定，由服务端的规则决定，并且客户端要及时向用户展示变化，所以加上了extra字段。</p>
<p>在设计extra字段的时候，并没有对其结构内容做限制，所以比较灵活，但是还是要有个type字段，来做约束，如：</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 升级</span></span><br><span class="line"><span class="symbol">type:</span> <span class="number">1</span>,</span><br><span class="line"><span class="symbol">show_msg:</span> <span class="string">&quot;恭喜您升级到XXX&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 完成任务</span></span><br><span class="line"><span class="symbol">type:</span> <span class="number">2</span>,</span><br><span class="line"><span class="symbol">task_desc:</span> <span class="string">&quot;达成XXX成就&quot;</span></span><br></pre></td></tr></table></figure>
<p>总的来说就是自由发挥，只要服务端、客户端相互沟通好即可。当然，也要避免乱用，保证真的需要全局附加数据才使用这个字段。</p>
<h1 id="请求数据返回值的规范"><a href="#请求数据返回值的规范" class="headerlink" title="请求数据返回值的规范"></a>请求数据返回值的规范</h1><h2 id="命名统一规范"><a href="#命名统一规范" class="headerlink" title="命名统一规范"></a>命名统一规范</h2><p>命名格式不管是使用驼峰还是下划线命名，只要全部统一就好，个人建议还是使用 <code>_</code>，看着舒服一点，例如：<code>user_id</code>、<code>user_name</code> 等；</p>
<p>命名语意尽量做到见名知意，但是别使用拼音真的很 low 而且真的反应不过来；使用常用缩写；</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">//</span> 字符串</span><br><span class="line">user_name, task_desc, date_str, article_title, feed_content 等</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 数字</span><br><span class="line">user_id, users_count, task_num, xxx_offset 等</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 日期</span><br><span class="line">login_at, create_date, logout_time 等</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 布尔</span><br><span class="line">is_done, is_vip, protected, can_read 等</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> URL</span><br><span class="line">user_avatar_url, thumb_url 等</span><br><span class="line"></span><br><span class="line"><span class="regexp">//</span> 数组</span><br><span class="line">users, news, thumb_imgs 等</span><br></pre></td></tr></table></figure>

<h2 id="空值的处理"><a href="#空值的处理" class="headerlink" title="空值的处理"></a>空值的处理</h2><p>空值的处理需慎重，特别容易引起 crash 等问题，服务端与客服端一定要协商好；</p>
<h3 id="统一空值用-null"><a href="#统一空值用-null" class="headerlink" title="统一空值用 null"></a>统一空值用 null</h3><p>除了布尔类型的，其余的空值统一用 <code>null</code> 表示，客户端保证每种字段的 <code>null</code> 可以被正常处理。</p>
<h3 id="统一空值不同类型设置默认空值"><a href="#统一空值不同类型设置默认空值" class="headerlink" title="统一空值不同类型设置默认空值"></a>统一空值不同类型设置默认空值</h3><p>除了 <code>null</code> ，还可以对字段设置 “默认值”，如数字就是 0，字符串就是空字符串 “”，数组就是空数组[]，对象就是空对象 {}，这样有个好处就是可以避免很多客户端（Java、OC）处理空值（Null、nil、null）产生的异常。但是危害就是容易语义不明。还是要根据具体业务、前后端约定而定。</p>
<h3 id="布尔-boolean-值的处理"><a href="#布尔-boolean-值的处理" class="headerlink" title="布尔 boolean 值的处理"></a>布尔 boolean 值的处理</h3><p>布尔值各种处理见过的有如下几种：</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">is_login:</span> <span class="literal">true</span>,</span><br><span class="line"><span class="attr">is_login:</span> <span class="string">&quot;true&quot;</span>,</span><br><span class="line"><span class="attr">is_login:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">is_login:</span> <span class="string">&quot;TRUE&quot;</span></span><br><span class="line"><span class="attr">is_login:</span> <span class="string">&quot;YES&quot;</span></span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure>

<p>由于语言本身的限制、框架的处理方式，不对布尔类型的值做限制总觉得不踏实，像C、C++、Objective-C 里面的布尔就是数字0和1，其它语言也都各自不一样，还有从数据库读写导致的布尔值类型不一致等。</p>
<p>个人习惯性<strong>统一为 0 和 1</strong>，然后在客户端和服务端统一设置常量、宏定义，定义布尔的类型，所有的参数、结果的布尔字段全部做强制约束。</p>
<h2 id="时间日期值的处理"><a href="#时间日期值的处理" class="headerlink" title="时间日期值的处理"></a>时间日期值的处理</h2><p>时间的处理也是非常容易出错的，特别是遇上时区转换的时候。</p>
<p><strong>强制GMT/UTC时间戳</strong></p>
<p>一种做法就是强制所有时间参数只能传 Unix 时间戳，也就是标准 GMT/UTC 时间戳，然后由各自的客户端根据自己的时区、显示要求做处理后显示。</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 从服务器接收的时间数据</span></span><br><span class="line">login_at: <span class="number">1462068610</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据时区、显示要求转换，如北京时间</span></span><br><span class="line">显示：<span class="number">2016</span>年<span class="number">5</span>月<span class="number">1</span>日下午<span class="number">1</span>点、<span class="number">1</span>天前等</span><br></pre></td></tr></table></figure>

<p>这样的话，客户端、服务端存储、读取时间都相当于处理纯数字。</p>
<p>使用ISO 8601带时区的时间日期字符串</p>
<p>使用Unix时间戳有个坏处，就是：</p>
<p>最早只能到1970/1/1 0:0:0GMT时间，一旦需求早于这个时间，时间戳就成了负数=。=<br>不方便人阅读。调试API的时候，开发人员不能直观看出具体时间，很不方便<br>所以，可以按照ISO 8601标准，用字符串保存、传输时间。</p>
<p>如果以YYYY-MM-DDThh:mm:ssTZD格式为准, 时间的形式就是1997-07-16T19:20:30+01:00，保存了时区信息，也方便阅读。</p>
<h2 id="type-类型的处理"><a href="#type-类型的处理" class="headerlink" title="type 类型的处理"></a>type 类型的处理</h2><p>API数据中免不了各种类型字段，如用户类型user_type、登录类型login_type等，类型的表示也可以分为数字、字符串两种。</p>
<p><strong>数字表示类型：</strong>这个应该是最直接的方式了，客户端和服务端共同维护某个API下、某个数据类型中的type常量，靠文档约束。</p>
<p><strong>字符串表示类型：</strong>数字的类型毕竟不利于直观阅读，如果可以的话，用字符串也是不错的，当然坏处就是代码里面就不能用Switch语句了（除了强大的 Swift =。=）</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如登录类型，QQ、微信、微博等</span></span><br><span class="line"><span class="symbol">login_type:</span> <span class="string">&quot;qq&quot;</span>,</span><br><span class="line"><span class="symbol">login_type:</span> <span class="string">&quot;wechat&quot;</span>,</span><br><span class="line"><span class="symbol">login_type:</span> <span class="string">&quot;sina_weibo&quot;</span>,</span><br></pre></td></tr></table></figure>

<h2 id="完整的URL，协议类型"><a href="#完整的URL，协议类型" class="headerlink" title="完整的URL，协议类型"></a>完整的URL，协议类型</h2><p>API里面的数据也会有URL类型的，一般来说如用户的头像、各种图片、音频等资源，都是以URL链接的形式返回的。</p>
<p>返回的URL一定要“完整”，主要指的是不要忘记URL里面的协议部分，也就是 scheme 部分。像 xxxx.me/imgs/1.jpg这种URL值，就是不完整的，没有指明网络协议，难道靠猜=。=</p>
<p>总结<br>嗯，规范非常重要。:-D</p>
<h1 id="参考地址"><a href="#参考地址" class="headerlink" title="参考地址"></a>参考地址</h1><ul>
<li><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2014/05/restful_api.html">阮一峰 RESTful API 设计指南</a></li>
</ul>
</div><div class="post-copyright"><script type="text/javascript" src="/js/copyright.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copyright.css"><p><span>本文标题：</span>服务端 API 接口设计</p><p><span>文章作者：</span>zerocc</p><p><span>发布时间：</span>2016年08月15日</p><p><span>原始链接：</span><a href="/2016081501.html">http://www.zerocc.com.cn/2016081501.html</a><span class="copy-path"><i class="fa fa-clipboard" data-clipboard-text="http://www.zerocc.com.cn/2016081501.html"></i></span></p><p><span>版权声明：</span>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0 CN</a> 许可协议。转载请注明出处！</p></div><br><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="http://www.zerocc.com.cn/2016081501.html" data-id="ckiebskvi000ddsxb8u8n3djz" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK4AAACuCAAAAACKZ2kyAAABzUlEQVR42u3aQQ6DMAxEUe5/aSp1hdQSzYztlEo/q4pC8mBhOXaOQx7ne6yvXK9f/13feUwMuHDhlrnncnxOfUf/vMedc30/XLhw93PXgebuYR2xfm0j2MGFC/dh3DW96zXgwoX7X1w9lVk/tTXuwoULt8DVF86KI+7naNirwYULt8B1C6YTvwfru3DhwjW5pzmy1Cdb68vMcOHC3cLNGqhZ6cRNoW7DHFy4cIe5bniql0KyTAYuXLj7udnUlfRIOczx5QpcuHC3cOvbkkoZRSHa9V24cOE2cbNJJ5IY+xvDhQt3gKtvb7rCk8KSIi5cuHDHuNmxCTdUucXW0jJw4cJt5WbHpLLDW8pxLrutAhcu3FauvmSW9OgvLAVBuHDhDnOVxEJvpurBLpwBLly4W7hugaPSju0KanDhwp3mrpd3Gx56VuWmUHDhwt3PVUqWWROl3pSFCxfur7jZsUtlA6Mf37RbqnDhwh3jVjYw+iYna7I2t2DhwoVr/psFr67XswMcXLhwN3LdwOS2Q0rnxeDChftgblYKyT7E7Qxw4cJ9MFdvh2TJDVy4cJ/AdYub7lNu+aOhLAIXLtwCN9txKOFMb6/WCzFw4cJt4r4AcOkGHOkSIQ0AAAAASUVORK5CYII=">分享</a><div class="tags"><a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"><i class="fa fa-tag"></i>服务器</a></div><div class="post-nav"><a class="pre" href="/20161023.html">只要最后是你就好</a><a class="next" href="/20160815.html">搭建本地服务进行调试</a></div><div id="lv-container" data-id="city" data-uid="MTAyMC8zMTcyMy84Mjg3"><script>(function(d, s) {
   var j, e = d.getElementsByTagName(s)[0];
   if (typeof LivereTower === 'function') { return; }
   j = d.createElement(s);
   j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
   j.async = true;
   e.parentNode.insertBefore(j, e);
})(document, 'script');
</script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://www.zerocc.com.cn"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C++</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%97%B6%E5%85%89%E6%B2%99%E6%BC%8F/">时光沙漏</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%9C%8D%E5%8A%A1%E7%AB%AF/">服务端</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/1602816267.html">Widget Extension in iOS 14</a></li><li class="post-list-item"><a class="post-list-link" href="/20190602.html">后来的我们</a></li><li class="post-list-item"><a class="post-list-link" href="/20181017.html">凌晨三点</a></li><li class="post-list-item"><a class="post-list-link" href="/1602472154.html">hexo博客主题更换 maupassant 配置</a></li><li class="post-list-item"><a class="post-list-link" href="/20181001.html">iOS - 苹果内购</a></li><li class="post-list-item"><a class="post-list-link" href="/20180312.html">希望我们冷漠且礼貌的相处</a></li><li class="post-list-item"><a class="post-list-link" href="/20180101.html">归来仍是少年</a></li><li class="post-list-item"><a class="post-list-link" href="/20171123.html">iOS 中证书和签名机制</a></li><li class="post-list-item"><a class="post-list-link" href="/1603866527.html">Cocopods 包管理工具使用</a></li><li class="post-list-item"><a class="post-list-link" href="/1602472277.html">hexo博客必用插件</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/iOS/" style="font-size: 25px;">iOS</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 15px;">工具</a> <a href="/tags/hexo/" style="font-size: 18.33px;">hexo</a> <a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/%E7%BB%88%E7%AB%AF%E6%8C%87%E4%BB%A4/" style="font-size: 15px;">终端指令</a> <a href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/" style="font-size: 18.33px;">服务器</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size: 21.67px;">随笔</a> <a href="/tags/%E5%BF%83%E6%83%85/" style="font-size: 15px;">心情</a> <a href="/tags/iOS-%E7%AC%AC%E4%B8%89%E6%96%B9%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/" style="font-size: 18.33px;">iOS 第三方源码阅读</a> <a href="/tags/%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/" style="font-size: 15px;">源码阅读</a> <a href="/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/" style="font-size: 15px;">密码学</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E5%B1%82/" style="font-size: 15px;">网络层</a> <a href="/tags/iOS-%E5%BA%95%E5%B1%82%E7%BB%93%E6%9E%84/" style="font-size: 15px;">iOS 底层结构</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">zerocc2014.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>